<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" 
    crossorigin="anonymous"> <!-- Enlace a Bootstrap para estilos -->
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

  <title>Home</title>
</head>
<body>
    <div class="container">
        <form action="/index" method="GET" class="text-center mt-5">
            <h1 class="p-2">Bienvenido al gestor de nuestra Tienda</h1>
            <a href="/productos" class="btn btn-primary mb-2">Agregar nuevo producto</a>
            <a href="/clientes" class="btn btn-primary mb-2">Agregar nuevo cliente</a>
            <a href="/pedidos" class="btn btn-primary mb-2">Agregar nuevo pedido</a>
        </form>
    </div>
    <div class="container">
        <div class="row my-4">
            <div class="col-lg-12">
                <div class="table-responsive">
                    <table id="tablaProductos" class="table table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Nombre</th>
                                <th scope="col">Descripción</th>
                                <th scope="col">Precio</th>
                                <th scope="col">Stock</th>
                                <th scope="col">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% productos.forEach(function(producto) { %>
                                <tr>
                                    <td><%= producto.id %></td>
                                    <td><%= producto.nombre %></td>
                                    <td><%= producto.descripcion %></td>
                                    <td><%= producto.precio %></td>
                                    <td><%= producto.stock %></td>
                                    <td class="text-start" style="padding-left: 0;">
                                        <form action="/productos/eliminar/<%= producto._id %>" method="POST" onsubmit="return confirm('¿Estás seguro de eliminar este producto?');">
                                            <button type="submit" class="btn btn-danger me-2" >Eliminar</button>
                                            <!--Boton para editar-->
                                            <a href="/productos/editar/<%= producto._id %>" class="btn btn-info">Editar</a>
                                        </form>
                                    </td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script>
    $(document).ready(function() {
        $('#tablaProductos').DataTable({
        paging: true,        // Activa la paginación
        searching: false,    // Desactiva la búsqueda
        ordering: false,     // Desactiva el ordenamiento
        pageLength: 6,       // Muestra solo 6 elementos por página
        lengthChange: false, // Oculta el menú para elegir cuántos mostrar
        info: true,          // Muestra "Mostrando 1 a 5 de 5 entradas"
        language: {
            paginate: {
            previous: "Anterior",
            next: "Siguiente"
            },
            info: "Mostrando _START_ a _END_ de _TOTAL_ entradas",
            infoEmpty: "Mostrando 0 a 0 de 0 entradas"
      }
    });
  });
    </script>

</body>
</html>